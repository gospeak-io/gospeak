@import com.mohiva.play.silhouette.api.actions.UserAwareRequest
@import fr.gospeak.core.domain.{Cfp, Group}
@import fr.gospeak.web.auth.domain.CookieEnv
@import fr.gospeak.web.domain.Breadcrumb
@import fr.gospeak.web.pages.partials.html._
@import fr.gospeak.web.pages.partials.display.html.markdown
@import fr.gospeak.web.pages.published.partials.html.container
@import fr.gospeak.web.pages.published.cfps.routes.CfpCtrl

@(group: Group, cfps: Seq[Cfp])(b: Breadcrumb)(implicit req: UserAwareRequest[CookieEnv, AnyContent], messages: Messages)
@container(group.name.value + " - Gospeak", b)() {
    <h1 class="d-flex justify-content-between align-items-center">
        <span>@group.name.value</span>
        @cfps.length match {
            case 0 => {}
            case 1 => {
                <a class="btn btn-primary" href="@CfpCtrl.propose(cfps.head.slug)">Propose a talk</a>
            }
            case _ => {
                <div class="dropdown d-flex">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownTalkProposal" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Propose a talk</button>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownTalkProposal">
                    @cfps.map { cfp =>
                        <a class="dropdown-item" href="@CfpCtrl.propose(cfp.slug)">@cfp.name.value</a>
                    }
                    </div>
                </div>
            }
        }
    </h1>
    <blockquote class="blockquote">@markdown(group.description)</blockquote>
}()
