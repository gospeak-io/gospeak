@import fr.gospeak.core.domain.Partner
@import fr.gospeak.libs.scalautils.domain.Page
@import fr.gospeak.web.domain.Breadcrumb
@import fr.gospeak.web.pages.orga.partials.html.container_theme
@import fr.gospeak.web.pages.orga.partners.routes.PartnerCtrl
@import fr.gospeak.web.pages.partials.display.html._
@import fr.gospeak.web.utils.Formats
@import fr.gospeak.web.utils.OrgaReq

@(partners: Page[Partner.Full])(b: Breadcrumb)(implicit req: OrgaReq[AnyContent])
@partnerItem(partner: Partner.Full) = {
    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
        <div>
            <h5 class="mb-1"><a href="@PartnerCtrl.detail(req.group.slug, partner.slug)">@partner.name.value</a></h5>
            @socialIcons(partner.social)
            @partner.venueCount venues,
            @partner.sponsorCount sponsors,
            @partner.contactCount contacts
        </div>
        <img src="@partner.logo.value" alt="@partner.name.value logo" class="avatar avatar-lg"  style="height: 50px">
    </div>
}
@container_theme(req.group.name.value + " - Gospeak", b)() {
    <h1 class="d-flex justify-content-between align-items-center">
        <span class="text-capitalize">@Formats.plural(partners.total.value, "partner")</span>
        <a class="btn btn-primary" href="@PartnerCtrl.create(req.group.slug)" data-hotkey="+">Create a partner</a>
    </h1>
    <div>
        Filters:
        @filterBool(partners, PartnerCtrl.list(req.group.slug, _), "With venues", "venues")
        @filterBool(partners, PartnerCtrl.list(req.group.slug, _), "With sponsors", "sponsors")
        @filterBool(partners, PartnerCtrl.list(req.group.slug, _), "With contacts", "contacts")
    </div>
    @Formats.paginated[Partner.Full](partners, PartnerCtrl.list(req.group.slug, _), partnerItem)
}()
